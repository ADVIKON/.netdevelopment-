<ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '3px' }">
</ngx-loading>

<nav class="navbar navbar-icon-top navbar-expand-lg bg-light navbar-light p-0">
  <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarCollapse">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarCollapse">
    <ul class="navbar-nav mr-auto">
      <li *ngIf="IsAdminLogin" class="nav-item p-1" routerLinkActive="active">
        <a class="nav-link" routerLink="/Registration">
          <i class="fa fa-superpowers" aria-hidden="true"></i>
          Activate
        </a>
      </li>

      <li *ngIf="chkDashboard == 'true'" click="Menu()" class="nav-item p-1" routerLinkActive="active">
        <a class="nav-link" routerLink="/Dashboard">
          <i class="fa fa-tachometer" aria-hidden="true"></i>
          Dashboard
          <span class="sr-only">(current)</span>
        </a>
      </li>




      <li *ngIf="chkPlayerDetail == 'true'" class="nav-item p-1" routerLinkActive="active">
        <a class="nav-link" routerLink="/LicenseHolderControl">
          <i class="fa fa-link" aria-hidden="true"></i>
          Player Details
        </a>
      </li>
      <li *ngIf="chkPlaylistLibrary == 'true'" class="nav-item p-1" routerLinkActive="active">
        <a class="nav-link" routerLink="/PlaylistLibrary">
          <i class="fa fa-suitcase" aria-hidden="true"></i>
          Library
        </a>
      </li>

      <li *ngIf="chkScheduling == 'true'" class="nav-item p-1" routerLinkActive="active">
        <a class="nav-link" routerLink="/StoreAndForward">
          <i class="fa fa-exchange" aria-hidden="true"></i>
          Scheduling
        </a>
      </li>
      <li *ngIf="chkAdvertisement == 'true'" class="nav-item p-1" routerLinkActive="active">
        <a class="nav-link" routerLink="/Ads">
          <i class="fa fa-bandcamp" aria-hidden="true"></i>
          Advertisement
        </a>
      </li>




      <li class="nav-item p-1" routerLinkActive="active">
        <a class="nav-link" routerLink="/CopyData">
          <i class="fa fa-clone" aria-hidden="true"></i>
          Copy Data
        </a>
      </li>
      <li class="nav-item p-1" routerLinkActive="active">
        <a class="nav-link" routerLink="/Links">
          <i class="fa fa-tasks" aria-hidden="true"></i>
          Links
        </a>
      </li>
      <li *ngIf="chkInstantPlay == 'true'" class="nav-item p-1" routerLinkActive="active">
        <a class="nav-link" routerLink="/InstantPlay">
          <i class="fa fa-eercast" aria-hidden="true"></i>
          Instant Play
        </a>
      </li>
      <li *ngIf="UserId ==0" class="nav-item p-1" routerLinkActive="active">
        <a class="nav-link" routerLink="/Users">
          <i class="fa fa-users" aria-hidden="true"></i>
          Users
        </a>
      </li>

      <li class="nav-item p-1" routerLinkActive="active">
        <a class="nav-link" routerLink="/Upload">
          <i class="fa fa-cloud-upload" aria-hidden="true"></i>
          Content Upload
        </a>
      </li>
      <!--
               <li  class="nav-item p-1" routerLinkActive="active">
            <a class="nav-link" routerLink="/Prayer">
              <i class="fa fa-ravelry" aria-hidden="true"></i>
              Prayer
            </a>
          </li>
            -->

      <li class="nav-item p-1" routerLinkActive="active">
        <a class="nav-link" routerLink="/AdminLogs">
          <i class="fa fa-ravelry" aria-hidden="true"></i>
          Admin Log
        </a>
      </li>
      <li class="nav-item p-1" routerLinkActive="active">
        <a class="nav-link" routerLink="/Reports">
          <i class="fa fa-table" aria-hidden="true"></i>
          Reports
        </a>
      </li>
    </ul>
    <ul class="navbar-nav p-0">

      <li class="nav-item p-1">
        <a class="nav-link" routerLink="">
          <i class="fa fa-sign-out"></i>
        </a>
      </li>
    </ul>

  </div>
</nav>

<div class="container-fluid m-0 p-0">
  <div class="row m-0 p-0">
    <div class="form-inline col-lg-12">
      <label for="cmbCustomer" class="mt-1 mb-2 mr-sm-2 pr-1">Customer Name:</label>
      <select name="CustomerName" class="mt-2 custom-select form-control mb-2 mr-sm-2 col-sm-3" [(ngModel)]="CustomerId"
        (change)="onChangeCustomer($event.target.value)" id="cmbCustomer">
        <option selected value="0"></option>
        <option *ngFor="let cLst of CustomerList" [value]="cLst.Id">{{cLst.DisplayName}}</option>
      </select>


      <label for="cmbGenre" class="mt-1 mb-2 mr-sm-2 pr-1">Genre Name:</label>
      <select name="cmbGenre" class="mt-2 custom-select form-control mb-2 mr-sm-2 col-sm-2" [(ngModel)]="cmbGenre"
        (change)="onChangeGenre($event.target.value)" id="cmbGenre">
        <option selected value="0"></option>
        <option *ngFor="let gLst of GenreList" [value]="gLst.Id">{{gLst.DisplayName}}</option>
      </select>

      <label for="cmbFolder" class="mt-1 mb-2 mr-sm-2 pr-1">Folder Name:</label>
      <select name="cmbFolder" class="mt-2 custom-select form-control mb-2 mr-sm-2 col-sm-2" [(ngModel)]="cmbFolder"
        (change)="onChangeFolder($event.target.value)" id="cmbFolder">
        <option selected value="0"></option>
        <option *ngFor="let fLst of FolderList" [value]="fLst.Id">{{fLst.DisplayName}}</option>
      </select>


      <button class="btn btn-primary mb-2 mr-1 mt-1" (click)="openGenreModal(modalGenre)">
        <i class="fa fa-bars" aria-hidden="true"></i>
      </button>
    </div>
  </div>
  <div class="row m-0 p-0" *ngIf="InputAccept!=''">
    <div class="col-md-3 mt-2">
      <h5>Select files</h5>

      <div ng2FileDrop [ngClass]="{'nv-file-over': hasBaseDropZoneOver}" (fileOver)="fileOverBase($event)"
        [uploader]="uploader" (onFileDrop)="onFileSelected($event)" class="well my-drop-zone"
        style="border: 1px dashed;height: 400px;width: 100%;">

        <div class="file-upload" id="customFile">
          <div class="file-select">
            <div class="file-select-button" id="fileName1">Choose File</div>
            <input type="file" name="profile" name="chooseFile2" id="chooseFile1" ng2FileSelect [uploader]="uploader"
              multiple (onFileSelected)="onFileSelected($event)" accept="{{ this.InputAccept }}" />

          </div>
        </div>
      </div>
      <!--
			<div ng2FileDrop [ngClass]="{'another-file-over-class': hasAnotherDropZoneOver}" (fileOver)="fileOverAnother($event)" [uploader]="uploader"
			 (onFileDrop)="onFileSelected($event)" class="well my-drop-zone">
				Another drop zone
			</div>
<input type="file" ng2FileSelect [uploader]="uploader" multiple (onFileSelected)="onFileSelected($event)"  /><br/>
       <p>Queue length: {{ uploader?.queue?.length }}</p>
-->






    </div>

    <div class="col-md-9 mt-2" style="margin-bottom: 40px">

      <h5>Upload queue</h5>

      <div class="table-responsive" style="height: 400px;overflow-y: scroll;">


        <table class="table table-sm table-bordered table-hover">
          <thead class="sticky-top thead-light">
            <tr>
              <th scope="col" class="sticky-top" class="sticky-top">Name</th>
              <th scope="col" class="sticky-top" class="sticky-top">Size</th>
              <th scope="col" class="sticky-top" class="sticky-top">Progress</th>
              <th scope="col" class="sticky-top Link-Center_Width">Status</th>
              <th class="sticky-top Link-Center_Width"></th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let item of uploader.queue">
              <td><strong>{{ item?.file?.name }}</strong></td>
              <td nowrap>{{ item?.file?.size/1024/1024 | number:'.2' }} MB</td>
              <td>
                <div class="progress" style="margin-bottom: 0;">
                  <div class="progress-bar" role="progressbar" [ngStyle]="{ 'width': item.progress + '%' }"></div>
                </div>
              </td>
              <td class="text-center Link-Center_Width">
                <span *ngIf="item.isSuccess"><i class="fa fa-check-circle"></i></span>
                <span *ngIf="item.isCancel"><i class="fa fa-ban"></i></span>
                <span *ngIf="item.isError"><i class="fa fa-times"></i></span>
              </td>
              <td nowrap class="Link-Center_Width">
                <i class="fa fa-trash text-danger" (click)="item.remove()"></i>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="row mt-2">
        <div class="col-lg-12">
          <div class="progress">
            <div class="progress-bar" role="progressbar" [ngStyle]="{ 'width': uploader.progress + '%' }">
            </div>
          </div>
        </div>
      </div>
      <div class="row mt-2">
        <div class="col-lg-12">
          <button type="button" class="btn btn-success btn-s mr-2" (click)="Upload()"
            [disabled]="!uploader.getNotUploadedItems().length">
            <span class="fa fa-cloud-upload"></span> Upload
          </button>
          <button type="button" class="btn btn-warning btn-s mr-2" (click)="uploader.cancelAll()"
            [disabled]="!uploader.isUploading">
            <span class="fa fa-ban"></span> Cancel
          </button>
          <button type="button" class="btn btn-danger btn-s" (click)="uploader.clearQueue()"
            [disabled]="!uploader.queue.length">
            <i class="fa fa-trash"></i> Remove
          </button>
        </div>
      </div>
    </div>

  </div>
  <div class="row m-0 p-0" *ngIf="InputAccept==''">
    <div class="form-inline col-lg-12">
      Please select customer and genre so upload options will display.
    </div>
  </div>


</div>

<ng-template #modalGenre let-c="close" let-d="dismiss">
  <div class="modal-header">
    <h5>Folder</h5>
    <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <div class="container-fluid">

      <div class="row">
        <div class="col-sm-12">
          <label for="State" class="mb-2 mr-sm-2">Folder Name:</label>
          <input type="text" [(ngModel)]="NewFolderName" class="form-control mb-2 mr-sm-2" id="fName">
        </div>

      </div>
      <div class="row">
        <div class="col-sm-12">
          <button class="btn btn-primary col-sm-2  pull-right" type="button" (click)="onSubmitNewGenre()">
            <i class="fa fa-floppy-o fa-lg" aria-hidden="true"></i>
          </button>
        </div>
      </div>

    </div>
  </div>

</ng-template>